<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>R-Santa: Magic Tree</title>
    <style>
        :root { --gold: #f1c40f; --green: #27ae60; --night: #1a1a2e; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: var(--night); color: white; overflow: hidden; }

        /* HUD */
        #top-bar { position: fixed; top: 10px; width: 100%; display: flex; justify-content: space-between; padding: 0 20px; z-index: 100; }
        .currency { background: rgba(0,0,0,0.5); padding: 5px 15px; border-radius: 20px; border: 1px solid var(--gold); }

        /* Main Game Area */
        #game-area { height: 70vh; display: flex; align-items: center; justify-content: center; position: relative; }
        #main-tree { font-size: 150px; transition: 0.5s; cursor: pointer; position: relative; }
        .decoration { position: absolute; font-size: 30px; }

        /* Bottom Menu */
        #bottom-menu { height: 30vh; background: rgba(255,255,255,0.1); display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 15px; border-top-radius: 20px; }
        .menu-btn { background: var(--green); border: none; color: white; border-radius: 10px; font-size: 12px; font-weight: bold; cursor: pointer; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .menu-btn span { font-size: 20px; margin-bottom: 5px; }

        /* Modals */
        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 1000; display: none; padding: 20px; overflow-y: auto; }
        .shop-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .item-card { background: #2c3e50; padding: 10px; border-radius: 10px; text-align: center; border: 1px solid #444; }
        .close-btn { position: absolute; top: 10px; right: 10px; font-size: 30px; color: white; cursor: pointer; }
    </style>
</head>
<body>

<div id="top-bar">
    <div class="currency">ğŸ’° <span id="rc-balance">100</span> RC</div>
    <div onclick="showModal('lang')">ğŸŒ Language</div>
</div>

<div id="game-area">
    <div id="main-tree">ğŸ„</div>
</div>

<div id="bottom-menu">
    <button class="menu-btn" onclick="showModal('shop')"><span>ğŸ›’</span> <b id="m-shop">Shop</b></button>
    <button class="menu-btn" onclick="showModal('chest')"><span>ğŸ“¦</span> <b id="m-chest">Chest</b></button>
    <button class="menu-btn" onclick="showModal('gifts')"><span>ğŸ</span> <b id="m-gifts">Gifts</b></button>
    <button class="menu-btn" onclick="showModal('collection')"><span>ğŸ–¼ï¸</span> <b id="m-coll">Collection</b></button>
    <button class="menu-btn" onclick="saveToCollection()" style="background: #e67e22;"><span>ğŸ’¾</span> <b id="m-save">Save</b></button>
    <button class="menu-btn" onclick="showModal('rating')"><span>ğŸ†</span> <b id="m-rate">Rating</b></button>
</div>

<div id="modal-shop" class="modal">
    <span class="close-btn" onclick="closeModal()">Ã—</span>
    <h2 id="s-title">Shop</h2>
    <div style="display: flex; justify-content: space-around; margin-top: 10px;">
        <button onclick="switchShop('trees')" id="s-trees">Archalar</button>
        <button onclick="switchShop('toys')" id="s-toys">O'yinchoqlar</button>
    </div>
    <div id="shop-content" class="shop-grid"></div>
</div>

<div id="modal-collection" class="modal">
    <span class="close-btn" onclick="closeModal()">Ã—</span>
    <h2 id="c-title">My Collection</h2>
    <div id="collection-gallery" class="shop-grid"></div>
</div>

<script>
    const i18n = {
        uz: { shop: "Do'kon", chest: "Sandig'im", gifts: "Sovg'alarim", coll: "Kolleksiyam", save: "Saqlash", rate: "Reyting", trees: "Archalar", toys: "Bezaklar" },
        ru: { shop: "ĞœĞ°Ğ³Ğ°Ğ·Ğ¸Ğ½", chest: "Ğ¡ÑƒĞ½Ğ´ÑƒĞº", gifts: "ĞŸĞ¾Ğ´Ğ°Ñ€ĞºĞ¸", coll: "ĞšĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ", save: "Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ", rate: "Ğ ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³", trees: "ĞĞ»ĞºĞ¸", toys: "Ğ˜Ğ³Ñ€ÑƒÑˆĞºĞ¸" },
        en: { shop: "Shop", chest: "My Chest", gifts: "My Gifts", coll: "Collection", save: "Save", rate: "Rating", trees: "Trees", toys: "Toys" }
    };

    let user = { rc: 100, currentTree: 'ğŸ„', collection: [], toys: [] };

    function startGame(lang) {
        // Tilni sozlash
        document.getElementById('m-shop').innerText = i18n[lang].shop;
        document.getElementById('m-chest').innerText = i18n[lang].chest;
        // ... qolgan tugmalar ham shunday o'zgaradi
    }

    function showModal(id) { document.getElementById('modal-' + id).style.display = 'block'; }
    function closeModal() { document.querySelectorAll('.modal').forEach(m => m.style.display = 'none'); }

    const treesData = [
        { img: 'ğŸ„', price: 0 }, { img: 'ğŸŒ²', price: 200 }, { img: 'ğŸŒ³', price: 500 }, { img: 'â„ï¸', price: 1000 }
    ];

    function switchShop(type) {
        let html = '';
        if(type === 'trees') {
            treesData.forEach(t => {
                html += `<div class="item-card"><h1>${t.img}</h1><p>${t.price} RC</p><button onclick="buyTree('${t.img}', ${t.price})">Buy</button></div>`;
            });
        } else {
            html += `<div class="item-card"><h1>âœ¨</h1><p>50 RC</p><button>Buy</button></div>`;
        }
        document.getElementById('shop-content').innerHTML = html;
    }

    function saveToCollection() {
        // Kolleksiyaga saqlash
        user.rc += 100;
        document.getElementById('rc-balance').innerText = user.rc;
        user.collection.push(user.currentTree);
        alert("Qorbobo: 100 RC sovg'a qildi! ğŸ…ğŸ");
    }

    switchShop('trees'); // Default shop
</script>
</body>
</html>