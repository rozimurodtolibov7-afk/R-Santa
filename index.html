<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>R-Santa: Tree Decorator</title>
    <style>
        :root { --gold: #f1c40f; --red: #e74c3c; --snow: #f8f9fa; }
        body { background: #050510; color: white; margin: 0; overflow: hidden; font-family: 'Segoe UI', sans-serif; }
        
        /* Background Snow Animation */
        .snowflake { position: fixed; top: -10px; color: white; z-index: 0; pointer-events: none; animation: fall linear infinite; }
        @keyframes fall { to { transform: translateY(105vh); } }

        /* Main Game Stage */
        #stage { height: 60vh; display: flex; justify-content: center; align-items: flex-end; position: relative; z-index: 10; padding-bottom: 20px; }
        #tree-wrapper { position: relative; display: inline-block; }
        #main-tree { height: 380px; pointer-events: none; }
        
        .toy { position: absolute; width: 40px; height: 40px; cursor: move; z-index: 100; touch-action: none; }

        /* Santa Animation */
        #santa-gift { position: fixed; bottom: -500px; left: 50%; transform: translateX(-50%); transition: 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 2000; text-align: center; }
        #santa-gift.active { bottom: 120px; }
        #santa-gift img { width: 220px; filter: drop-shadow(0 10px 20px rgba(0,0,0,0.5)); }

        /* Navigation Menu */
        #menu { height: 40vh; background: rgba(255,255,255,0.05); display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 15px; border-radius: 30px 30px 0 0; border-top: 1px solid rgba(255,255,255,0.1); z-index: 1000; position: relative; }
        .nav-btn { background: rgba(255,255,255,0.1); border: none; color: white; border-radius: 15px; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; transition: 0.2s; }
        .nav-btn span { font-size: 24px; margin-bottom: 5px; }
        .nav-btn:active { background: #27ae60; transform: scale(0.95); }

        /* Modals */
        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 3000; display: none; padding: 20px; overflow-y: auto; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .item-card { background: #1e1e2f; padding: 15px; border-radius: 15px; text-align: center; border: 1px solid #333; }
        .item-card img { width: 50px; margin-bottom: 10px; }
    </style>
</head>
<body>

<div id="stage">
    <div id="tree-wrapper">
        <img src="https://png.pngtree.com/png-vector/20230906/ourmid/pngtree-green-christmas-tree-png-image_9997439.png" id="main-tree">
    </div>
</div>

<div id="santa-gift">
    <img src="https://gemini-user-uploads.googleusercontent.com/..." id="santa-img">
    <div style="background:var(--red); padding:10px 20px; border-radius:15px; border:2px solid var(--gold); margin-top:-30px; position:relative;">
        <h3 style="margin:0">HO-HO-HO!</h3>
        <p style="margin:5px 0 0">+100 RC & New Toy!</p>
    </div>
</div>

<div id="menu">
    <button class="nav-btn" onclick="openModal('shop')"><span>üõí</span>Shop</button>
    <button class="nav-btn" onclick="openModal('chest')"><span>üì¶</span>Chest</button>
    <button class="nav-btn" onclick="openModal('gifts')"><span>üéÅ</span>Gifts</button>
    <button class="nav-btn" onclick="openModal('collection')"><span>üñºÔ∏è</span>Collection</button>
    <button class="nav-btn" onclick="saveTree()" style="background:var(--red)"><span>üíæ</span>Save</button>
    <button class="nav-btn" onclick="openModal('rating')"><span>üèÜ</span>Rating</button>
</div>

<div id="modal-shop" class="modal">
    <h2>Christmas Shop <span style="float:right" onclick="closeModal()">√ó</span></h2>
    <div class="grid" id="shop-content"></div>
</div>

<script>
    let rc = 100;
    let myToys = [];
    const shopToys = [
        { id: 1, img: 'https://png.pngtree.com/png-clipart/20220910/ourmid/pngtree-christmas-ball-ornaments-png-image_6150247.png', price: 50 },
        { id: 2, img: 'https://png.pngtree.com/png-vector/20231109/ourmid/pngtree-christmas-star-yellow-png-image_10526322.png', price: 80 }
    ];

    function openModal(id) {
        document.getElementById('modal-' + id).style.display = 'block';
        if(id === 'shop') renderShop();
    }
    function closeModal() { document.querySelectorAll('.modal').forEach(m => m.style.display = 'none'); }

    function renderShop() {
        let html = '';
        shopToys.forEach(t => {
            html += `<div class="item-card"><img src="${t.img}"><p>${t.price} RC</p><button onclick="buy(${t.id})">Buy</button></div>`;
        });
        document.getElementById('shop-content').innerHTML = html;
    }

    function buy(id) {
        let toy = shopToys.find(x => x.id === id);
        if(rc >= toy.price) {
            rc -= toy.price;
            myToys.push(toy.img);
            alert("Purchased! Check your Chest.");
        } else alert("Not enough RC!");
    }

    function saveTree() {
        const santa = document.getElementById('santa-gift');
        santa.classList.add('active');
        rc += 100;
        setTimeout(() => { santa.classList.remove('active'); }, 3000);
    }

    // Snow animation
    setInterval(() => {
        const s = document.createElement('div');
        s.className = 'snowflake'; s.innerHTML = '‚ùÑ';
        s.style.left = Math.random() * 100 + 'vw';
        s.style.animationDuration = Math.random() * 3 + 2 + 's';
        document.body.appendChild(s);
        setTimeout(() => s.remove(), 5000);
    }, 200);
</script>
</body>
</html>